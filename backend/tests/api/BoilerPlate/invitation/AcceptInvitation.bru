meta {
  name: Accept Invitation - New User
  type: http
  seq: 3
}

post {
  url: {{baseUrl}}/accept-invitation
  body: json
  auth: none
}

body:json {
  {
    "identifier": "{{invitationId}}",
    "fullName": "Bruno Test User",
    "password": "SecurePassword123!"
  }
}

assert {
  res.status: eq 200
  res.body: isJson
}

tests {
  test("should accept invitation and create new user", function() {
    const data = res.getBody();
    expect(data).to.have.property('message');
    expect(data).to.have.property('userExists');
    expect(data.userExists).to.be.false;
  });
}

docs {
  Test d'acceptation d'invitation pour un nouvel utilisateur.
  Le user sera créé et ajouté à l'organisation via la table pivot.
}
